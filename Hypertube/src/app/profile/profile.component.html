
<div *ngIf="displayLoad" class="loading-container">
	<div class="loading"></div>
</div>

<div class="profile-wrap" *ngIf="!displayLoad">
	
	<div class="profile-card">
		<img *ngIf="photo" class="profile-image" src="{{photo}}">
		<img *ngIf="!photo" class="profile-image" src="../../assets/no-thumbnail.png">
		<div class="card-body">
			<h4 class="card-title">{{username}}</h4>
			<p class="card-text">{{email}}</p>
			<p *ngIf="!verified" class="title text-danger">Not verified!</p>
			<p *ngIf="verified" class="title lead text-success">verified</p>
			<button class="btn" [ngClass]=" editButton ? 'btn-primary' : 'btn-outline-primary' " (click)="editProfile()">Edit profile</button>
		</div>
	</div>

	<form  *ngIf="editButton" #form="ngForm" (ngSubmit)="onEditProfile(form)" class="edit-profile bg-dark">
		<div class="form-group">
			<h3>Username:</h3>
			<input type="text" class="form-control" ngModel name="username" minlength="5" #username="ngModel">
			<span class="help-block" *ngIf="!username.valid && username.touched">Please enter a valid email minimum characters is 5</span>
		</div>
		<div class="form-group">
			<h3>Photo:</h3>
			<input type="text" class="form-control" ngModel name="photo" #photo="ngModel">
		</div>
		<p>OR</p>
		<h3>Upload Zone</h3>
		<div class="dropzone" dropZone (hovered)="toggleHover($event)" (dropped)="startUpload($event)" [class.hovering]="isHovering">

			<div class="file">
				<input class="file-input" type="file" (change)="startUpload($event.target.files)">
				<span class="file-cta">
					<span class="file-icon"><i class="fa fa-upload"></i></span>
					<span class="file-label">or choose a fileâ€¦</span>
				</span>
			</div>
		</div>
		<div *ngIf="percentage | async as pct">
			<progress class="progress is-info" [value]="pct" max="100">
			</progress>
			{{ pct | number }}%
		</div>
		<div *ngIf="snapshot | async as snap">
			{{ snap.bytesTransferred | fileSize }} of {{ snap.totalBytes | fileSize }}
	
			<button (click)="task.pause()" class="btn btn-outline-warning api-button" [disabled]="!isActive(snap)">Pause</button>
			<button (click)="task.cancel()" class="btn btn-danger" [disabled]="!isActive(snap)">Cancel</button>
			<button (click)="task.resume()" class="btn btn-success" [disabled]="!(snap?.state === 'paused')">Resume</button>
		</div>
		<div class="alert alert-warning" *ngIf="errormsg">
			<strong>Error!</strong> {{errormsg}}
		</div>
		<div class="register-buttons form-group">
			<button class="btn btn-outline-warning" type="Submit" [disabled]="!form.valid">Update</button>
			<button class="btn btn-outline-light" type="button" (click)="editProfile()">Cancel</button>
		</div>
	</form>
	
	

</div>
