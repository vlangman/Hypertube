<div *ngIf="displayLoad" class="loading-container">
	<div class="loading"></div>
</div>

<div *ngIf="!displayLoad" class="mainForm">

	<div class="seriesWrapper" >
		<div class="series-details" [ngStyle]="{'background-image': 'url(' + Details.tv_results[0].backdrop + ')'}">
			<div class="image-wrap">
				<img class="series-image" src="{{ Details.tv_results[0].poster }}">
				<div class=" btn-group watchbtn">
					<button *ngIf=" !showdetails " class="btn btn-outline-primary" [disabled]="currDownload" (click)="downloadSeries(0)">Download Episode</button>
				</div>
			</div>
			

			<div class="series-info">
				<h1>{{ Details.tv_results[0].name }}</h1>
				<h3>First air: {{ Details.tv_results[0].airdate }}</h3>
				<div class="ratings">
					<h1><i class="fab fa-imdb imdb"></i> {{ Details.tv_results[0].rating }}</h1>
					<p class="text-warning" >  from {{ Details.tv_results[0].votes }} votes</p>
				</div>
				
				<div class="series-summary">
					<p>{{ Details.tv_results[0].overview }}</p>
				</div>
				
				<hr style="background: white; width: 100%;"/>
				<h3 class="text-warning" *ngIf="dowloadMessage != null">{{ dowloadMessage }}</h3>
			</div>


		</div>


		<vg-player *ngIf=" watch " class="videogular" (onPlayerReady)="onPlayerReady($event)">
			<vg-overlay-play></vg-overlay-play>
			<vg-buffering [vgFor]=" videoPlayer " ></vg-buffering>


			<video [vgMedia]="media" #media id="videoPlayer" preload="auto" crossorigin>
				<source [src]="source" type="video/mp4">
				<track kind="subtitles" label="English"  *ngIf="subtitlesStreameng" [src]="subtitlesStreameng" srclang="en" default='true'>
				<track kind="subtitles" *ngIf="subtitlesStreamfre" label="French" [src]="subtitlesStreamfre" srclang="fr" default='false'>
			</video>
	
			<vg-controls>
				<vg-play-pause [vgFor]=" videoPlayer "></vg-play-pause>
				<vg-playback-button [vgFor]=" videoPlayer "></vg-playback-button>

				<vg-time-display vgProperty="current" vgFormat="mm:ss"></vg-time-display>

				<vg-scrub-bar>
					<vg-scrub-bar-current-time [vgFor]=" videoPlayer "></vg-scrub-bar-current-time>
					<vg-scrub-bar-buffering-time [vgFor]=" videoPlayer "></vg-scrub-bar-buffering-time>
				</vg-scrub-bar>

				<vg-time-display vgProperty="left" vgFormat="mm:ss"></vg-time-display>
				<vg-time-display vgProperty="total" vgFormat="mm:ss"></vg-time-display>

				<vg-track-selector></vg-track-selector>
				<vg-mute></vg-mute>
				<vg-volume></vg-volume>
				<vg-fullscreen></vg-fullscreen>
			</vg-controls>
			
		</vg-player>

	<div *ngIf="currDownload || checkDownload" class="bg-dark  loading-container">
		<div class="loading"></div>
	</div>

	<div class="episodes-container">
		<li *ngFor="let seasons of episodesList; index as Count" class="list-group">
			<a class="list-group-item season-toggle" (click)="toggleSeason(Count)"><h2 style="text-align: center; color: black" class="head">Season {{ seasonCount[Count] }} <i class="fas fa-caret-down"></i></h2></a>
			
			<ul [ngClass]=" seasonToggle == Count ? 'episode-row': 'submenu-closed'" class="list-group-item " *ngFor="let episodes of seasons; index as episodeCount">
				<h6 class="episode-label lead text-muted">Episode {{episodes.episode.index}}</h6>
				<div class="btn-group episode-buttons" role="group" aria-label="Basic example">
				  <button  (click)="downloadShow(link,Count,episodes.episode.index,0)" [disabled]="currDownload "  *ngFor=" let link of episodes['links'] " type="button" class="btn btn-secondary">Load: {{link.quality}}</button>
				</div>
			</ul>

		</li>
	</div>


</div>


